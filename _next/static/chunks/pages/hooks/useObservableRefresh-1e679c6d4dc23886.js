(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7832],{82695:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hooks/useObservableRefresh",function(){return t(50052)}])},98184:function(e,r,t){"use strict";function n(e,r,t,n,o,a,u){try{var i=e[a](u),s=i.value}catch(l){t(l);return}i.done?r(s):Promise.resolve(s).then(n,o)}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){o(e,r,t[r])})}return e}Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return s},getConfig:function(){return c}});var u=function(e,r){var t,n,o,a,u=function(e){return function(r){return i([e,r])}},i=function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(e,s)}catch(u){a=[6,u],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}},s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},i={onUnhandledError:function(e){console.error(e)},pagination:{pageStart:1,perPage:25}};function s(e){var r,t,n;t=a({},i,e),n=(n={pagination:a({pageStart:1,perPage:25},i.pagination,null!==(r=e.pagination)&&void 0!==r?r:{})},n),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),i=t,function(){l.apply(this,arguments)}()}function l(){var e;return e=function(){var e;return u(this,function(r){try{(e=t(32937)).config&&!e.config.onUnhandledError&&(e.config.onUnhandledError=function(e){return i.onUnhandledError(e,"rxjs")})}catch(n){}return[2]})},(l=function(){var r=this,t=arguments;return new Promise(function(o,a){var u=e.apply(r,t);function i(e){n(u,o,a,i,s,"next",e)}function s(e){n(u,o,a,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function c(){return i}},83775:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});var n=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(t(27378)),o=t(98184);function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function u(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:r})(e)}function i(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],u=!0,i=!1;try{for(o=o.call(e);!(u=(t=o.next()).done)&&(a.push(t.value),!r||a.length!==r);u=!0);}catch(s){i=!0,n=s}finally{try{u||null==o.return||o.return()}finally{if(i)throw n}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){var t=i(n.useState(void 0),2),a=t[0],u=t[1],s=i(n.useState(),2),l=s[0],c=s[1],f=i(n.useState(!0),2),p=f[0],d=f[1],b=i(n.useState(!1),2),y=b[0],v=b[1],h=n.useCallback(e,r);return n.useEffect(function(){u(void 0),c(void 0),v(!1),d(!0);var e=h().subscribe({next:function(e){u(function(){return e}),c(void 0),d(!1)},error:function(e){(0,o.getConfig)().onUnhandledError(e,"hooks"),u(void 0),c(e),d(!1)},complete:function(){v(!0),d(!1)}});return function(){return e.unsubscribe()}},[h]),[a,l,y,p]}},2517:function(e,r,t){"use strict";Object.defineProperty(r,"Z",{enumerable:!0,get:function(){return p}});var n,o=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(t(27378)),a=t(32937),u=t(19978),i=t(98184),s=(n=t(83775),n&&n.__esModule?n:{default:n});function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function c(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:r})(e)}function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],u=!0,i=!1;try{for(o=o.call(e);!(u=(t=o.next()).done)&&(a.push(t.value),!r||a.length!==r);u=!0);}catch(s){i=!0,n=s}finally{try{u||null==o.return||o.return()}finally{if(i)throw n}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,r){var t=f(o.useState(),2),n=t[0],l=t[1],c=f(o.useState(),2),p=c[0],d=c[1],b=o.useRef(new a.BehaviorSubject(!0)).current,y=f((0,s.default)(function(){return b.pipe((0,u.tap)(function(){l(void 0),d(void 0)}),(0,u.switchMap)(function(){return e().pipe((0,u.tap)(function(e){return l(e)}),(0,u.catchError)(function(e){return(0,i.getConfig)().onUnhandledError(e,"hooks"),d(e),a.NEVER}))}))},r),4),v=y[2],h=y[3];return[n,p,v,o.useCallback(function(){return b.next(!0)},[b]),h]}},50052:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b},meta:function(){return p}});var n=t(31373),o=t(52050);t(27378);var a=t(35318),u=t(56100),i=t(16784),s=t(52641),l=t(30222),c=t(38861),f=t(2517),p={name:"useObservableRefreshRefresh",tableOfContents:{depth:0,children:[{depth:1,slug:"#useobservablerefresh",title:"useObservableRefresh",children:[{depth:2,slug:"#como-usar",title:"Como usar"},{depth:2,slug:"#cuidados",title:"Cuidados"},{depth:2,slug:"#par\xe2metros-e-retorno",title:"Par\xe2metros e Retorno"}]}]}},d={meta:p};function b(e){var r=e.components,t=(0,n.Z)(e,["components"]);return(0,a.kt)("wrapper",Object.assign({},d,t,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",Object.assign({},{id:"useobservablerefresh"}),"useObservableRefresh"),(0,a.kt)("p",null,"Um ",(0,a.kt)("strong",{parentName:"p"},"useObservable")," que retorna uma fun\xe7\xe3o de refresh para recarregar, \xfatil na trativa de erros ou refresh."),(0,a.kt)("h2",Object.assign({},{id:"como-usar"}),"Como usar"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"const [value, error, completed, loading, refresh] = useObservableRefresh(() => userService.get(), []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    {value}\n    <Button onClick={refresh} variant='text'>\n      Refresh\n    </Button>\n  </div>\n);\n")),(0,a.kt)(u.X,{__position:0,code:'() => {\n  const [value, error, completed, refresh] = useObservableRefresh(\n    () => interval(1000).pipe(take(10)),\n    [],\n  )\n  return (\n    <div>\n      <Typography>Value: {value}</Typography>\n      <Typography>Completed: {completed.toString()}</Typography>\n      <Button onClick={refresh} variant="text">\n        Refresh\n      </Button>\n    </div>\n  )\n}',scope:{props:t,Playground:u.X,interval:i.F,take:s.q,Button:l.Z,Typography:c.default,useObservableRefresh:f.Z,meta:p},mdxType:"Playground"},function(){var e=(0,o.Z)((0,f.Z)(function(){return(0,i.F)(1e3).pipe((0,s.q)(10))},[]),4),r=e[0],t=(e[1],e[2]),n=e[3];return(0,a.kt)("div",null,(0,a.kt)(c.default,{mdxType:"Typography"},"Value: ",r),(0,a.kt)(c.default,{mdxType:"Typography"},"Completed: ",t.toString()),(0,a.kt)(l.Z,{onClick:n,variant:"text",mdxType:"Button"},"Refresh"))}),(0,a.kt)("h2",Object.assign({},{id:"cuidados"}),"Cuidados"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Erros")," ocorridos ser\xe3o automaticamentes logados (n\xe3o tratados) se as o ",(0,a.kt)("strong",{parentName:"li"},"onUnhandledError")," no ",(0,a.kt)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado, mas se utilizar o operador catchError esse erro n\xe3o ser\xe1 logado pois foi previamente tratado,\nnesse caso o log deve ser feito manualmente."),(0,a.kt)("li",{parentName:"ul"},"O valor inicial ser\xe1 ",(0,a.kt)("strong",{parentName:"li"},"undefined"),", lembre-se de tratar isso quando estiver usando.")),(0,a.kt)("h2",Object.assign({},{id:"par\xe2metros-e-retorno"}),"Par\xe2metros e Retorno"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * @param observableGenerator Fun\xe7\xe3o que retorna um Observable\n * @param deps Lista de depend\xeancias\n * @returns [\n *    value: valor de retorno do Observable,\n *    error: se ocorrer um erro, ele ser\xe1 passado aqui,\n *    complete: boolean se o observable foi completado ou n\xe3o,\n *    loading: boolean se esta carregando ou n\xe3o,\n *    refresh: function para recarregar\n * ]\n */\nexport default useObservableRefresh<T>(observableGenerator: () => Observable<T>, deps: React.DependencyList): [T, any, boolean, boolean, () => void];\n")))}b.isMDXComponent=!0;var y={editThisPagePath:"src/pages/hooks/useObservableRefresh/index.mdx"};for(var v in y)window[v]=y[v]}},function(e){e.O(0,[4526,1866,2885,2937,8238,737,4109,2995,9774,2888,179],function(){return e(e.s=82695)}),_N_E=e.O()}]);