(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{84833:function(d,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){if(Array.isArray(a))return e.default(a)};var a,e=(a=c(37290))&&a.__esModule?a:{default:a}},38375:function(b,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},43957:function(c,b,a){"use strict";b.Z=function(a){return d.default(a)||e.default(a)||g.default(a)||f.default()};var d=h(a(84833)),e=h(a(91834)),f=h(a(38375)),g=h(a(30053));function h(a){return a&&a.__esModule?a:{default:a}}},57272:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hooks/usePromiseCallback",function(){return c(27212)}])},70010:function(d,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),function(c,a){for(var b in a)Object.defineProperty(c,b,{get:a[b],enumerable:!0})}(b,{default:function(){return j},getConfig:function(){return m}});var e=a(17576).Z,c=a(42619).Z,f=a(62069).Z,g=a(81826).Z,h=c(a(86248)),i={onUnhandledError:function(a){console.error(a)},pagination:{pageStart:1,perPage:25}};function j(b){var a;i=g(f({onUnhandledError:function(){return null}},i,b),{pagination:f({pageStart:1,perPage:25},i.pagination,null!==(a=b.pagination)&& void 0!==a?a:{})}),k()}function k(){return l.apply(this,arguments)}function l(){return(l=e(h.default.mark(function b(){var c;return h.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:try{(c=a(32937)).config&&!c.config.onUnhandledError&&(c.config.onUnhandledError=function(a){return i.onUnhandledError(a,"rxjs")})}catch(d){}case 1:case"end":return b.stop()}},b)}))).apply(this,arguments)}function m(){return i}},7437:function(d,b,a){"use strict";Object.defineProperty(b,"Z",{get:function(){return i},enumerable:!0});var c=a(96808).Z,e=a(43957).Z,f=c(a(27378)),g=a(70010),h=0;function i(b,a){var c=f.useRef(!0),d=f.useRef();return f.useEffect(function(){return function(){c.current=!1}},[]),f.useCallback(function(){for(var f=arguments.length,i=new Array(f),a=0;a<f;a++)i[a]=arguments[a];var k=++h;d.current=k;var j=b.apply(void 0,[function(){return console.log({currentCall:k,lastCall:d.current}),c.current&&d.current===k}].concat(e(i)));return j.catch(function(a){throw(0,g.getConfig)().onUnhandledError(a,"hooks"),a}),j},a)}},16847:function(f,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{get:function(){return g},enumerable:!0});var c=b(67430).Z,d=b(42619).Z,e=d(c(b(96342),a)),g=e.default},95639:function(f,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{get:function(){return n},enumerable:!0});var d=a(42619).Z,c=a(96808).Z,g=a(62069).Z,h=a(81826).Z,i=a(8473).Z,j=a(9889).Z,k=a(24246);c(a(27378));var e=c(a(16847)),l=d(a(72150));function m(){var a=j(["\n    border: none;\n    cursor: pointer;\n    text-transform: none;\n    height: ","rem;\n    min-width: ","rem;\n    padding: ",";\n    border-radius: ",";\n    font-weight: ",";\n    font-family: ",";\n    line-height: ",";\n    font-size: ",";\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    :not(:focus) {\n      transition: 0.3s;\n    }\n\n    :focus {\n      outline: solid "," ",";\n    }\n\n    &.--contained {\n      background-color: ",";\n      color: ",";\n\n      &:hover:not(:disabled),\n      &:focus {\n        background-color: ",";\n      }\n    }\n\n    &.--outlined {\n      background-color: transparent;\n      border: "," solid;\n      border-color: ",";\n      color: ",";\n\n      &:hover:not(:disabled),\n      &:focus {\n        background-color: ",";\n      }\n    }\n\n    &.--text {\n      background-color: ",";\n      color: ",";\n\n      &:hover:not(:disabled),\n      &:focus {\n        background-color: ",";\n      }\n    }\n\n    &.--disabled {\n      border: none;\n      background-color: ",";\n      color: ",";\n      cursor: default;\n    }\n\n    &.--fullWidth {\n      width: 100%;\n    }\n\n    & > .__loader {\n      position: absolute;\n      left: 50%;\n      transform: translate(-50%, 0);\n    }\n\n    & > .--hidden {\n      visibility: hidden;\n    }\n\n    & > .__startIcon {\n      margin-right: ",";\n    }\n\n    & > .__endIcon {\n      margin-left: ",";\n    }\n\n    & > .__startIcon,\n    & > .__endIcon {\n      line-height: 0;\n    }\n\n    & > .__startIcon > svg,\n    & > .__endIcon > svg {\n      vertical-align: middle;\n      font-size: ","rem;\n    }\n  "]);return m=function(){return a},a}var n=(0,e.default)(function(a){var d=a.children,f=a.disabled,c=void 0!==f&&f,j=a.startIcon,m=a.endIcon,n=a.variant,o=a.loading,b=void 0!==o&&o,p=a.className,q=a.fullWidth,r=i(a,["children","disabled","startIcon","endIcon","variant","loading","className","fullWidth"]);return(0,k.jsxs)("button",h(g({role:"button",className:(0,e.cx)(p,"--".concat(null!=n?n:"contained"),{"--fullWidth":q},{"--disabled":c||b})},r),{disabled:c||b,"aria-disabled":c,children:[!!j&&(0,k.jsx)("span",{className:(0,e.cx)("__startIcon",{"--hidden":b}),children:j}),!b&&(0,k.jsx)("span",{className:"__text",children:d}),b&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"__loader",children:(0,k.jsx)(l.default,{size:20,color:"inherit"})}),(0,k.jsx)("span",{className:"__text --hidden",children:d})]}),!!m&&(0,k.jsx)("span",{className:(0,e.cx)("__endIcon",{"--hidden":b}),children:m})]}))},{label:"houston-button"})(function(b){var a=b.theme;return(0,e.css)(m(),a.pxToRem(48),a.pxToRem(96),a.spacing.squish.xxs,a.border.radius.xs,a.font.weight.semibold,a.font.family.base,a.line.height.default,a.font.size.xs,a.border.width.sm,a.feedbackColor.informative.pure,a.brandColor.primary.pure,a.neutralColor.high.pure,a.hexToRgba(a.brandColor.primary.pure,a.opacity.level[8]),a.border.width.xs,a.neutralColor.low.pure,a.neutralColor.low.pure,a.hexToRgba(a.neutralColor.low.pure,a.opacity.level[2]),a.hexToRgba(a.neutralColor.low.pure,a.opacity.level[0]),a.neutralColor.low.pure,a.hexToRgba(a.neutralColor.low.pure,a.opacity.level[2]),a.hexToRgba(a.neutralColor.low.pure,a.opacity.level[2]),a.hexToRgba(a.neutralColor.low.pure,a.opacity.level[6]),a.spacing.inline.nano,a.spacing.inline.nano,a.pxToRem(24))})},72150:function(h,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{get:function(){return o},enumerable:!0});var e=a(42619).Z,c=a(96808).Z,i=a(9889).Z,j=a(24246);c(a(27378));var d=c(a(16847)),k=e(a(79955));function f(){var a=i(["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(270deg); }\n"]);return f=function(){return a},a}function l(){var a=i(["\n  0% { stroke-dashoffset: ","; }\n  50% { stroke-dashoffset: ","; transform: rotate(135deg); }\n  100% { stroke-dashoffset: ","; transform: rotate(450deg); }\n"]);return l=function(){return a},a}function m(){var a=i(["\n    animation: "," 1.4s linear infinite;\n    color: ",";\n\n    & > circle {\n      stroke: currentColor;\n      stroke-width: ",";\n      stroke-dasharray: ",";\n      stroke-dashoffset: 0;\n      transform-origin: center;\n      animation: "," 1.4s ease-in-out infinite;\n    }\n  "]);return m=function(){return a},a}function g(){var a=i(["\n  ","\n"]);return g=function(){return a},a}var n=(0,d.keyframes)(f()),o=(0,d.default)(function(c){var e=c.className,d=c.size,a=void 0===d?65:d,b=a/65*30;return(0,j.jsx)("svg",{className:e,width:"".concat(a,"px"),height:"".concat(a,"px"),viewBox:"0 0 ".concat(a+1," ").concat(a+1),children:(0,j.jsx)("circle",{fill:"none",strokeLinecap:"round",cx:b+.1*b,cy:b+.1*b,r:b})})},{label:"houston-loader"})(g(),function(b){var a,g=b.theme,e=b.color,f=b.size,c=void 0===f?65:f;return(0,d.css)(m(),n,"inherit"===e?"inherit":(0,k.default)(g,e).pure,c/65*6,c/65*187,(a=c,(0,d.keyframes)(l(),a/65*187,a/65*46.75,a/65*187)))})},10576:function(g,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{get:function(){return m},enumerable:!0});var c=a(42619).Z,d=a(96808).Z,h=a(62069).Z,i=a(81826).Z,j=a(8473).Z,k=a(24246),e=d(a(27378)),l=c(a(98021)),f=e.forwardRef(function(a,c){var b=a.as,d=a.children,e=j(a,["as","children"]);return(0,k.jsx)(l.default,i(h({as:void 0===b?"figcaption":b,ref:c,size:"xxs"},e),{children:d}))}),m=f},42665:function(g,c,a){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{get:function(){return r},enumerable:!0});var b=a(42619).Z,d=a(96808).Z,h=a(62069).Z,i=a(81826).Z,j=a(8473).Z,k=a(24246),e=d(a(27378)),l=b(a(75645)),m=b(a(98021)),n=b(a(33205)),o={h1:"giant",h2:"xxxl",h3:"xxl",h4:"lg",h5:"md",h6:"xs",display:"giant",xl:"xxxl",lg:"xxl",md:"lg",sm:"md",xs:"xs"},p={h1:"xxxl",h2:"xxl",h3:"lg",h4:"md",h5:"sm",h6:"xs",display:"xxxl",xl:"xxl",lg:"lg",md:"md",sm:"sm",xs:"xs"},q={h1:"regular",h2:"regular",h3:"semibold",h4:"semibold",h5:"semibold",h6:"bold",display:"regular",xl:"regular",lg:"semibold",md:"semibold",sm:"semibold",xs:"bold"},f=e.forwardRef(function(a,f){var d=a.as,c=void 0===d?"h1":d,g=a.children,b=a.size,r=j(a,["as","children","size"]),s=(0,l.default)().breakpoints,t=(0,n.default)(s.down("sm")),e=t?p:o,u=b?e[b]:e[c],v=b?q[b]:q[c];return(0,k.jsx)(m.default,i(h({as:c,ref:f,size:u,weight:v},r),{children:g}))}),r=f},35323:function(g,c,a){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{get:function(){return q},enumerable:!0});var b=a(42619).Z,d=a(96808).Z,h=a(62069).Z,i=a(81826).Z,j=a(8473).Z,k=a(24246),e=d(a(27378)),l=b(a(75645)),m=b(a(98021)),n=b(a(33205)),o={lg:"sm",sm:"xs"},p={lg:"sm",sm:"xs"},f=e.forwardRef(function(a,e){var b=a.as,f=a.children,c=a.size,d=void 0===c?"lg":c,g=j(a,["as","children","size"]),q=(0,l.default)().breakpoints,r=(0,n.default)(q.down("sm")),s=(r?p:o)[d];return(0,k.jsx)(m.default,i(h({as:void 0===b?"p":b,ref:e,size:s,lineHeight:d},g),{children:f}))}),q=f},24097:function(g,c,a){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{get:function(){return q},enumerable:!0});var b=a(42619).Z,d=a(96808).Z,h=a(62069).Z,i=a(81826).Z,j=a(8473).Z,k=a(24246),e=d(a(27378)),l=b(a(75645)),m=b(a(98021)),n=b(a(33205)),o={lg:"lg",sm:"md"},p={lg:"md",sm:"sm"},f=e.forwardRef(function(a,d){var b=a.as,e=a.children,c=a.size,f=j(a,["as","children","size"]),g=(0,l.default)().breakpoints,q=(0,n.default)(g.down("sm")),r=(q?p:o)[void 0===c?"lg":c];return(0,k.jsx)(m.default,i(h({as:void 0===b?"h2":b,ref:d,size:r},f),{children:e}))}),q=f},98021:function(o,c,a){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{get:function(){return x},enumerable:!0});var b=a(42619).Z,d=a(96808).Z,p=a(62069).Z,q=a(8473).Z,r=a(69854).Z,s=a(9889).Z,t=a(24246),e=d(a(27378)),f=d(a(96342)),g=b(a(40772)),u=b(a(27322)),h=b(a(10576)),i=b(a(42665)),j=b(a(35323)),k=b(a(24097));function v(){var a=s(["\n        margin-bottom: ",";\n      "]);return v=function(){return a},a}function w(){var a=s(["\n      margin: 0;\n      font-size: ",";\n      font-weight: ",";\n      line-height: ",";\n      color: ",";\n\n      ","\n    "]);return w=function(){return a},a}function l(){var a=s(["\n  ","\n"]);return l=function(){return a},a}var m=e.forwardRef(function(b,d){var c=b.as,e=b.className,a=q(b,["as","className"]);a.size,a.lineHeight,a.weight,a.marginBottom,a.color;var f=q(a,["size","lineHeight","weight","marginBottom","color"]);return(0,t.jsx)(void 0===c?"p":c,p({ref:d,className:e},f))}),n=(0,f.default)(m)(l(),function(a){var b=a.theme,d=a.size,e=a.lineHeight,g=a.weight,h=a.color,c=a.marginBottom;return(0,f.css)(w(),b.font.size[void 0===d?"xs":d],b.font.weight[void 0===g?"regular":g],b.line.height[void 0===e?"md":e],function(e,a){if("inherit"===a)return"inherit";if("primary"===a)return e.brandColor.primary.pure;var b,c,d=r(a.split("."),3),g=d[0],h=d[1],i=d[2],f=null===(b=e[g])|| void 0===b?void 0:null===(c=b[h])|| void 0===c?void 0:c[i];return f||(0,u.default)("Typography","invalid color ".concat(a)),f}(b,void 0===h?"neutralColor.low.pure":h),c&&(0,f.css)(v(),"boolean"==typeof c?b.spacing.nano:b.spacing[c]))}),x=(0,g.default)(n,{Caption:h.default,Heading:i.default,Paragraph:j.default,Subtitle:k.default})},79955:function(b,a){"use strict";function c(b){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"primary";return["low","high"].includes(a)?b.neutralColor[a]:["positive","negative","warning","informative"].includes(a)?b.feedbackColor[a]:b.brandColor[a]}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{get:function(){return c},enumerable:!0})},40772:function(c,a,b){"use strict";function d(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{get:function(){return d},enumerable:!0}),(0,b(96808).Z)(b(27378))},27322:function(b,a){"use strict";function c(a,b){console.warn("\u26A0\uFE0F Houston(".concat(a,"): ").concat(b))}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{get:function(){return c},enumerable:!0})},27212:function(g,b,a){"use strict";a.r(b),a.d(b,{"default":function(){return f},meta:function(){return e}});var h=a(27378),i=a(35318),j=a(56100),k=a(95639),l=a(98021),m=a(7437);function n(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function o(a){return function(a){if(Array.isArray(a))return n(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||p(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(a,c){if(a){if("string"==typeof a)return n(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return n(a,c)}}var e={name:"usePromiseCallback",tableOfContents:{depth:0,children:[{depth:1,slug:"#usepromisecallback",title:"usePromiseCallback",children:[{depth:2,slug:"#como-usar",title:"Como usar"},{depth:2,slug:"#cuidados",title:"Cuidados"},{depth:2,slug:"#par\xe2metros-e-retorno",title:"Par\xe2metros e Retorno"}]}]}},q={meta:e};function f(a){var c=a.components,b=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["components"]);return(0,i.kt)("wrapper",Object.assign({},q,b,{components:c,mdxType:"MDXLayout"}),(0,i.kt)("h1",Object.assign({},{id:"usepromisecallback"}),"usePromiseCallback"),(0,i.kt)("p",null,"Retorn um callback que dar\xe1 Subscribe e retornar\xe1 o resultado de uma promise e quando o componente desmonta (unmount) tamb\xe9m d\xe1\nunsubscribe, diminuindo assim o risco de Memory Leak. ",(0,i.kt)("strong",{parentName:"p"},"Como useEffect que retorna o valor da Promise")),(0,i.kt)("h2",Object.assign({},{id:"como-usar"}),"Como usar"),(0,i.kt)("pre",null,(0,i.kt)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"const [loading, setLoading] = useState();\nconst callback = usePromiseCallback(async isSubscribe => {\n  setLoading(true);\n  await userService.get();\n  // Se for setar um estado sempre verifique o isSubscribe, para evitar Memory Leak, e subsequentes chamadas\n  // far\xe3o que chamadas anteriores n\xe3o alterem estados.\n  if (isSubscribe()) setLoading(false);\n}, []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    <button onClick={callback}>iniciar</button>\n  </div>\n);\n")),(0,i.kt)("p",null,"Veja o exemplo abaixo:"),(0,i.kt)(j.X,{__position:0,code:"() => {\n  const callCounter = useRef(0)\n  const [reset, setReset] = useState()\n  const [loading, setLoading] = useState(false)\n  const [completed, setCompleted] = useState([])\n  const [ignored, setIgnored] = useState([])\n  const callback = usePromiseCallback(\n    (isSubscribe) => {\n      const currentCall = ++callCounter.current\n      setLoading(true)\n      return new Promise((resolve) =>\n        setTimeout(() => resolve('ol\xe1'), 2000),\n      ).then(() => {\n        if (isSubscribe()) {\n          setLoading(false)\n          setCompleted((completed) => [...completed, currentCall])\n        } else {\n          setIgnored((ignored) => [...ignored, currentCall])\n        }\n      })\n    },\n    [reset],\n  )\n  return (\n    <div>\n      <p>Loading: {loading.toString()}</p>\n      <p>cliques completos: {JSON.stringify(completed)}</p>\n      <p>cliques ignorados: {JSON.stringify(ignored)}</p>\n      <Button onClick={callback}>\n        Iniciar (Tente clicar mais de uma vez)\n      </Button>\n    </div>\n  )\n}",scope:{props:b,useState:h.useState,useCallback:h.useCallback,useRef:h.useRef,Playground:j.X,Button:k.default,Typography:l.default,usePromiseCallback:m.Z,meta:e},mdxType:"Playground"},function(){var n=(0,h.useRef)(0),a=(0,h.useState)(),e=a[0];a[1];var b=(0,h.useState)(!1),f=b[0],p=b[1],c=(0,h.useState)([]),g=c[0],q=c[1],d=(0,h.useState)([]),j=d[0],r=d[1],l=(0,m.Z)(function(a){var b=++n.current;return p(!0),new Promise(function(a){return setTimeout(function(){return a("ol\xe1")},2e3)}).then(function(){a()?(p(!1),q(function(a){return o(a).concat([b])})):r(function(a){return o(a).concat([b])})})},[e]);return(0,i.kt)("div",null,(0,i.kt)("p",null,"Loading: ",f.toString()),(0,i.kt)("p",null,"cliques completos: ",JSON.stringify(g)),(0,i.kt)("p",null,"cliques ignorados: ",JSON.stringify(j)),(0,i.kt)(k.default,{onClick:l,mdxType:"Button"},"Iniciar (Tente clicar mais de uma vez)"))}),(0,i.kt)("h2",Object.assign({},{id:"cuidados"}),"Cuidados"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Erros")," ocorridos ser\xe3o automaticamentes logados e as o ",(0,i.kt)("strong",{parentName:"li"},"onUnhandledError")," no ",(0,i.kt)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado.")),(0,i.kt)("h2",Object.assign({},{id:"par\xe2metros-e-retorno"}),"Par\xe2metros e Retorno"),(0,i.kt)("pre",null,(0,i.kt)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"/**\n * @param promiseCallback Fun\xe7\xe3o que retorna uma Promise, pode receber parametros\n * @param deps Lista de depend\xeancias\n * @returns [\n *    callback: callback para iniciar a promise,\n *    value: valor de retorno do Promise,\n *    error: se ocorrer um erro, ele ser\xe1 passado aqui,\n *    loading: boolean se esta carregando ou n\xe3o\n * ]\n */\nexport default function usePromiseCallback<T, F extends (...args: any[]) => Promise<T>>(\n  promiseCallback: F,\n  deps: React.DependencyList\n): [(...a: Parameters<F>) => Promise<T>, T, any, boolean];\n")))}f.isMDXComponent=!0;var c={editThisPagePath:"src/pages/hooks/usePromiseCallback/index.mdx"};for(var d in c)window[d]=c[d]}},function(a){a.O(0,[4526,3186,9961,3521,7978,9774,2888,179],function(){return a(a.s=57272)}),_N_E=a.O()}])